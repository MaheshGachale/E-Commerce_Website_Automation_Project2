# Test info

- Name: Cross-category product selection and purchase
- Location: C:\Users\Mahesh Gachale\Desktop\Advanced_Projects\E-Commerce Website Automation\tests\Automation.spec.js:96:5

# Error details

```
Error: locator.click: Error: strict mode violation: getByRole('link', { name: 'Sony vaio i5' }) resolved to 2 elements:
    1) <a class="hrefch" href="prod.html?idp_=8">Sony vaio i5</a> aka getByRole('link', { name: 'Sony vaio i5' }).first()
    2) <a class="hrefch" href="prod.html?idp_=8">Sony vaio i5</a> aka getByRole('link', { name: 'Sony vaio i5' }).nth(1)

Call log:
  - waiting for getByRole('link', { name: 'Sony vaio i5' })

    at C:\Users\Mahesh Gachale\Desktop\Advanced_Projects\E-Commerce Website Automation\tests\Automation.spec.js:107:58
```

# Page snapshot

```yaml
- navigation:
  - link "PRODUCT STORE":
    - /url: index.html
    - img
    - text: PRODUCT STORE
  - list:
    - listitem:
      - link "Home (current)":
        - /url: index.html
    - listitem:
      - link "Contact":
        - /url: "#"
    - listitem:
      - link "About us":
        - /url: "#"
    - listitem:
      - link "Cart":
        - /url: cart.html
    - listitem:
      - link "Log in":
        - /url: "#"
    - listitem
    - listitem
    - listitem:
      - link "Sign up":
        - /url: "#"
  - list:
    - listitem
    - listitem
    - listitem
  - img "First slide"
  - button "Previous"
  - button "Next"
- link "CATEGORIES":
  - /url: ""
- link "Phones":
  - /url: "#"
- link "Laptops":
  - /url: "#"
- link "Monitors":
  - /url: "#"
- link:
  - /url: prod.html?idp_=8
- heading "Sony vaio i5" [level=4]:
  - link "Sony vaio i5":
    - /url: prod.html?idp_=8
- heading "$790" [level=5]
- paragraph: Sony is so confident that the VAIO S is a superior ultraportable laptop that the company proudly compares the notebook to Apple's 13-inch MacBook Pro. And in a lot of ways this notebook is better, thanks to a lighter weight.
- link:
  - /url: prod.html?idp_=9
- heading "Sony vaio i7" [level=4]:
  - link "Sony vaio i7":
    - /url: prod.html?idp_=9
- heading "$790" [level=5]
- paragraph: REVIEW Sony is so confident that the VAIO S is a superior ultraportable laptop that the company proudly compares the notebook to Apple's 13-inch MacBook Pro. And in a lot of ways this notebook is better, thanks to a lighter weight, higher-resolution display, more storage space, and a Blu-ray drive.
- link:
  - /url: prod.html?idp_=11
- heading "MacBook air" [level=4]:
  - link "MacBook air":
    - /url: prod.html?idp_=11
- heading "$700" [level=5]
- paragraph: 1.6GHz dual-core Intel Core i5 (Turbo Boost up to 2.7GHz) with 3MB shared L3 cache Configurable to 2.2GHz dual-core Intel Core i7 (Turbo Boost up to 3.2GHz) with 4MB shared L3 cache.
- link:
  - /url: prod.html?idp_=12
- heading "Dell i7 8gb" [level=4]:
  - link "Dell i7 8gb":
    - /url: prod.html?idp_=12
- heading "$700" [level=5]
- paragraph: 6th Generation Intel Core i7-6500U Dual-Core Processor 2.5 GHz (max boost speed up to 3.1GHz) 4MB L3 Cache, 8GB DDR4 1600 MHz, 1TB 5400 RPM HDD15.6 in Full HD LED-backlit touchscreen with Truelife (1920 x 1080), 10-finger multi-touch support, Intel HD Graphics 520 with shared graphics memory
- link:
  - /url: prod.html?idp_=13
- heading "2017 Dell 15.6 Inch" [level=4]:
  - link "2017 Dell 15.6 Inch":
    - /url: prod.html?idp_=13
- heading "$700" [level=5]
- paragraph: 7th Gen Intel Core i7-7500U mobile processor 2.70 GHz with Turbo Boost Technology up to 3.50 GHz, Intel HD Graphics 62015.6 inch Full HD IPS TrueLife LED-backlit touchscreen (1920 x 1080), 10-finger multi-touch support, 360° flip-and-fold design,8GB DDR4 2400 MHz Memory, 1TB 5400 RPM HDD, No optical drive, 3 in 1 card reader (SD SDHC SDXC)
- link:
  - /url: prod.html?idp_=15
- heading "MacBook Pro" [level=4]:
  - link "MacBook Pro":
    - /url: prod.html?idp_=15
- heading "$1100" [level=5]
- paragraph: Apple has introduced three new versions of its MacBook Pro line, including a 13-inch and 15-inch model with the Touch Bar, a thin, multi-touch strip display that sits above the MacBook Pro's keyboard.
- link:
  - /url: prod.html?idp_=1
- heading "Samsung galaxy s6" [level=4]:
  - link "Samsung galaxy s6":
    - /url: prod.html?idp_=1
- heading "$360" [level=5]
- paragraph: The Samsung Galaxy S6 is powered by 1.5GHz octa-core Samsung Exynos 7420 processor and it comes with 3GB of RAM. The phone packs 32GB of internal storage cannot be expanded.
- link:
  - /url: prod.html?idp_=2
- heading "Nokia lumia 1520" [level=4]:
  - link "Nokia lumia 1520":
    - /url: prod.html?idp_=2
- heading "$820" [level=5]
- paragraph: The Nokia Lumia 1520 is powered by 2.2GHz quad-core Qualcomm Snapdragon 800 processor and it comes with 2GB of RAM.
- link:
  - /url: prod.html?idp_=3
- heading "Nexus 6" [level=4]:
  - link "Nexus 6":
    - /url: prod.html?idp_=3
- heading "$650" [level=5]
- paragraph: The Motorola Google Nexus 6 is powered by 2.7GHz quad-core Qualcomm Snapdragon 805 processor and it comes with 3GB of RAM.
- link:
  - /url: prod.html?idp_=4
- heading "Samsung galaxy s7" [level=4]:
  - link "Samsung galaxy s7":
    - /url: prod.html?idp_=4
- heading "$800" [level=5]
- paragraph: The Samsung Galaxy S7 is powered by 1.6GHz octa-core it comes with 4GB of RAM. The phone packs 32GB of internal storage that can be expanded up to 200GB via a microSD card.
- link:
  - /url: prod.html?idp_=5
- heading "Iphone 6 32gb" [level=4]:
  - link "Iphone 6 32gb":
    - /url: prod.html?idp_=5
- heading "$790" [level=5]
- paragraph: It comes with 1GB of RAM. The phone packs 16GB of internal storage cannot be expanded. As far as the cameras are concerned, the Apple iPhone 6 packs a 8-megapixel primary camera on the rear and a 1.2-megapixel front shooter for selfies.
- link:
  - /url: prod.html?idp_=6
- heading "Sony xperia z5" [level=4]:
  - link "Sony xperia z5":
    - /url: prod.html?idp_=6
- heading "$320" [level=5]
- paragraph: Sony Xperia Z5 Dual smartphone was launched in September 2015. The phone comes with a 5.20-inch touchscreen display with a resolution of 1080 pixels by 1920 pixels at a PPI of 424 pixels per inch.
- link:
  - /url: prod.html?idp_=7
- heading "HTC One M9" [level=4]:
  - link "HTC One M9":
    - /url: prod.html?idp_=7
- heading "$700" [level=5]
- paragraph: The HTC One M9 is powered by 1.5GHz octa-core Qualcomm Snapdragon 810 processor and it comes with 3GB of RAM. The phone packs 32GB of internal storage that can be expanded up to 128GB via a microSD card.
- link:
  - /url: prod.html?idp_=8
- heading "Sony vaio i5" [level=4]:
  - link "Sony vaio i5":
    - /url: prod.html?idp_=8
- heading "$790" [level=5]
- paragraph: Sony is so confident that the VAIO S is a superior ultraportable laptop that the company proudly compares the notebook to Apple's 13-inch MacBook Pro. And in a lot of ways this notebook is better, thanks to a lighter weight.
- link:
  - /url: prod.html?idp_=9
- heading "Sony vaio i7" [level=4]:
  - link "Sony vaio i7":
    - /url: prod.html?idp_=9
- heading "$790" [level=5]
- paragraph: REVIEW Sony is so confident that the VAIO S is a superior ultraportable laptop that the company proudly compares the notebook to Apple's 13-inch MacBook Pro. And in a lot of ways this notebook is better, thanks to a lighter weight, higher-resolution display, more storage space, and a Blu-ray drive.
- list:
  - listitem:
    - button "Previous"
  - listitem:
    - button "Next"
- heading "About Us" [level=4]
- paragraph: We believe performance needs to be validated at every stage of the software development cycle and our open source compatible, massively scalable platform makes that a reality.
- heading "Get in Touch" [level=4]
- paragraph: "Address: 2390 El Camino Real"
- paragraph: "Phone: +440 123456"
- paragraph: "Email: demo@blazemeter.com"
- heading "PRODUCT STORE" [level=4]:
  - img
  - text: PRODUCT STORE
- contentinfo:
  - paragraph: Copyright © Product Store 2017
```

# Test source

```ts
   7 |
   8 |   // Save credentials to a JSON file
   9 |   const credentials = { username, password };
   10 |   fs.writeFileSync('credentials.json', JSON.stringify(credentials, null, 2));
   11 |
   12 |   await page.goto('https://www.demoblaze.com/');
   13 |   await page.getByRole('link', { name: 'Sign up' }).click();
   14 |   await page.getByRole('textbox', { name: 'Username:' }).fill(username);
   15 |   await page.getByRole('textbox', { name: 'Password:' }).fill(password);
   16 |   await page.getByRole('button', { name: 'Sign up' }).click();
   17 |   await page.waitForTimeout(2000); // Wait for the dialog to appear
   18 |   page.once('dialog', dialog => dialog.dismiss().catch(() => {}));
   19 |   await expect(page.getByRole('link', { name: `Sign up` })).toBeVisible();
   20 |
   21 | });
   22 |
   23 | test('Login functionality', async ({ page }) => {
   24 |   const credentials = JSON.parse(fs.readFileSync('credentials.json', 'utf-8'));
   25 |   const { username, password } = credentials;
   26 |
   27 |   await page.goto('https://www.demoblaze.com/');
   28 |   await page.getByRole('link', { name: 'Log in' }).click();
   29 |   await page.locator('#loginusername').fill(username);
   30 |   console.log(username);
   31 |   await page.locator('#loginpassword').fill(password);
   32 |   console.log(password);
   33 |   await page.getByRole('button', { name: 'Log in' }).click();
   34 |   await expect(page.getByRole('link', { name: `Welcome ${username}` })).toBeVisible();
   35 |   await page.getByRole('link', { name: 'Log out' }).click();
   36 |   await expect(page.getByRole('link', { name: 'Sign up' })).toBeVisible();
   37 | });
   38 |
   39 | test('Add multiple products to cart and place an order', async ({ page }) => {
   40 |   test.slow();
   41 |   const orderDetails = {
   42 |     name: 'John Doe',
   43 |     country: 'USA',
   44 |     city: 'New York',
   45 |     creditCard: '1234567890123456',
   46 |     month: '12',
   47 |     year: '2025',
   48 |   };
   49 |   fs.writeFileSync('orderDetails.json', JSON.stringify(orderDetails, null, 2));
   50 |
   51 |   await page.goto('https://www.demoblaze.com/');
   52 |   await page.getByRole('link', { name: 'Samsung galaxy s6' }).click();
   53 |   page.once('dialog', dialog => dialog.dismiss().catch(() => {}));
   54 |   await page.getByRole('link', { name: 'Add to cart' }).click();
   55 |   await page.goto('https://www.demoblaze.com/');
   56 |   await page.getByRole('link', { name: 'Nokia lumia' }).click();
   57 |   page.once('dialog', dialog => dialog.dismiss().catch(() => {}));
   58 |   await page.getByRole('link', { name: 'Add to cart' }).click();
   59 |   await page.goto('https://www.demoblaze.com/');
   60 |   await page.getByRole('link', { name: 'Nexus' }).click();
   61 |   page.once('dialog', dialog => dialog.dismiss().catch(() => {}));
   62 |   await page.getByRole('link', { name: 'Add to cart' }).click();
   63 |   await page.getByRole('link', { name: 'Cart', exact: true }).click();
   64 |   await expect(page.getByRole('cell', { name: 'Nokia lumia' })).toBeVisible();
   65 |   // await expect(page.getByRole('cell', { name: 'Samsung galaxy s6' })).toBeVisible();
   66 |   await expect(page.getByRole('cell', { name: 'Nexus' })).toBeVisible();
   67 |   await page.getByRole('button', { name: 'Place Order' }).click();
   68 |
   69 |   // Fill order details
   70 |   await page.getByRole('textbox', { name: 'Name:' }).fill(orderDetails.name);
   71 |   await page.getByRole('textbox', { name: 'Country:' }).fill(orderDetails.country);
   72 |   await page.getByRole('textbox', { name: 'City:' }).fill(orderDetails.city);
   73 |   await page.getByRole('textbox', { name: 'Credit card:' }).fill(orderDetails.creditCard);
   74 |   await page.getByRole('textbox', { name: 'Month:' }).fill(orderDetails.month);
   75 |   await page.getByRole('textbox', { name: 'Year:' }).fill(orderDetails.year);
   76 |   await page.getByRole('button', { name: 'Purchase' }).click();
   77 |   await expect(page.getByRole('heading', { name: 'Thank you for your purchase!' })).toBeVisible();
   78 | });
   79 |
   80 | test('Verify product prices', async ({ page }) => {
   81 |   test.slow();
   82 |   await page.goto('https://www.demoblaze.com/');
   83 |   await page.getByRole('link', { name: 'Samsung galaxy s6' }).click();
   84 |   const product1Price = parseInt((await page.getByRole('heading', { name: /\$360/ }).textContent()).replace('$', ''));
   85 |   page.once('dialog', dialog => dialog.dismiss().catch(() => {}));
   86 |   await page.getByRole('link', { name: 'Add to cart' }).click();
   87 |   await page.getByRole('link', { name: 'Cart', exact: true }).click();
   88 |   console.log(product1Price);
   89 |   const totalPrice = product1Price
   90 |   await page.waitForSelector('#totalp', { state: 'visible' });
   91 |   const price = await page.locator('#totalp').textContent();
   92 |   expect(parseInt(price.trim())).toBe(totalPrice);
   93 |
   94 | });
   95 |
   96 | test('Cross-category product selection and purchase', async ({ page }) => {
   97 |   const orderDetails = JSON.parse(fs.readFileSync('orderDetails.json', 'utf-8'));
   98 |
   99 |   await page.goto('https://www.demoblaze.com/');
  100 |   await page.getByRole('link', { name: 'Phones' }).click();
  101 |   await page.getByRole('link', { name: 'Samsung galaxy s6' }).click();
  102 |   page.once('dialog', dialog => dialog.dismiss().catch(() => {}));
  103 |   await page.getByRole('link', { name: 'Add to cart' }).click();
  104 |   await page.goBack()
  105 |   await page.goBack()
  106 |   await page.getByRole('link', { name: 'Laptops' }).click();
> 107 |   await page.getByRole('link', { name: 'Sony vaio i5' }).click();
      |                                                          ^ Error: locator.click: Error: strict mode violation: getByRole('link', { name: 'Sony vaio i5' }) resolved to 2 elements:
  108 |   page.once('dialog', dialog => dialog.dismiss().catch(() => {}));
  109 |   await page.getByRole('link', { name: 'Add to cart' }).click();
  110 |   await page.goBack()
  111 |   await page.goBack()
  112 |   await page.getByRole('link', { name: 'Monitors' }).click();
  113 |   await page.getByRole('link', { name: 'Apple monitor' }).click();
  114 |   page.once('dialog', dialog => dialog.dismiss().catch(() => {}));
  115 |   await page.getByRole('link', { name: 'Add to cart' }).click();
  116 |   await page.getByRole('link', { name: 'Cart', exact: true }).click();
  117 |   // await expect(page.getByRole('cell', { name: 'Samsung galaxy s6' })).toBeVisible();
  118 |   await expect(page.getByRole('cell', { name: 'Sony vaio i5' })).toBeVisible();
  119 |   await expect(page.getByRole('cell', { name: 'Apple monitor' })).toBeVisible();
  120 |   await page.getByRole('button', { name: 'Place Order' }).click();
  121 |
  122 |   // Fill order details again
  123 |   await page.getByRole('textbox', { name: 'Name:' }).fill(orderDetails.name);
  124 |   await page.getByRole('textbox', { name: 'Country:' }).fill(orderDetails.country);
  125 |   await page.getByRole('textbox', { name: 'City:' }).fill(orderDetails.city);
  126 |   await page.getByRole('textbox', { name: 'Credit card:' }).fill(orderDetails.creditCard);
  127 |   await page.getByRole('textbox', { name: 'Month:' }).fill(orderDetails.month);
  128 |   await page.getByRole('textbox', { name: 'Year:' }).fill(orderDetails.year);
  129 |   await page.getByRole('button', { name: 'Purchase' }).click();
  130 |   await expect(page.getByRole('heading', { name: 'Thank you for your purchase!' })).toBeVisible();
  131 | });
  132 |
```